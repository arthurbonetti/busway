<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações | Busway</title>
    <link rel="stylesheet" href="settings.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-content">
            <button class="nav-back" onclick="window.location.href='user-dashboard.html'" title="Voltar">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="page-title">Configurações</h1>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dark Mode Section -->
        <div class="settings-section">
            <h2 class="section-title">Aparência</h2>
            <div class="setting-card">
                <div class="setting-info">
                    <svg class="setting-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                    </svg>
                    <div>
                        <div class="setting-label">Modo Noturno</div>
                        <div class="setting-description">Ative o tema escuro</div>
                    </div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- Auto Recharge Section -->
        <div class="settings-section">
            <h2 class="section-title">Recarga Automática</h2>
            <div class="setting-card">
                <div class="setting-info">
                    <svg class="setting-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <div>
                        <div class="setting-label">Recarga Automática</div>
                        <div class="setting-description">Recarregue saldo automaticamente</div>
                    </div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="autoRechargeToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="auto-recharge-config" id="autoRechargeConfig" style="display: none;">
                <div class="input-group">
                    <label>Quando o saldo for menor que</label>
                    <input type="number" id="rechargeThreshold" placeholder="10.00" step="0.01" min="5">
                    <span class="input-suffix">R$</span>
                </div>
                <div class="input-group">
                    <label>Adicionar</label>
                    <input type="number" id="rechargeAmount" placeholder="20.00" step="0.01" min="5">
                    <span class="input-suffix">R$</span>
                </div>
                <button class="btn-save" onclick="saveAutoRecharge()">Salvar Configuração</button>
            </div>
        </div>

        <!-- Feedback Section -->
        <div class="settings-section">
            <h2 class="section-title">Feedback</h2>
            <div class="feedback-card">
                <svg class="feedback-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#667eea">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                </svg>
                <h3>Envie sua opinião</h3>
                <p>Ajude-nos a melhorar o Busway com seu feedback</p>
                <textarea
                    id="feedbackText"
                    class="feedback-textarea"
                    placeholder="Conte-nos o que você achou do app, sugestões ou problemas que encontrou..."
                    maxlength="500"
                ></textarea>
                <div class="feedback-footer">
                    <span class="char-count" id="charCount">0/500</span>
                    <button class="btn-submit" onclick="submitFeedback()">Enviar Feedback</button>
                </div>
            </div>
        </div>
    </main>

    <div class="notification" id="notification"></div>

    <!-- Firebase v8 SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- App Scripts -->
    <script src="firebase-config.js"></script>
    <script src="firestore-service.js"></script>
    <script src="settings.js"></script>
</body>
</html>
